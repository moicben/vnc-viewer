module.exports=[406,(e,t,a)=>{t.exports=e.x("next/dist/compiled/@opentelemetry/api",()=>require("next/dist/compiled/@opentelemetry/api"))},6928,e=>e.a(async(t,a)=>{try{let t=await e.y("@supabase/supabase-js-13bdb2f0966edf07");e.n(t),a()}catch(e){a(e)}},!0),4592,e=>e.a(async(t,a)=>{try{var r=e.i(6928),i=t([r]);async function n(e,t){try{let a,i,n=process.env.SUPABASE_URL,s=process.env.SUPABASE_ANON_KEY;if(!n||!s){let e=[];n||e.push("SUPABASE_URL"),s||e.push("SUPABASE_ANON_KEY"),t.setHeader("Access-Control-Allow-Origin","*"),t.status(500).json({error:"Configuration incomplète",message:`Variables d'environnement manquantes: ${e.join(", ")}. Veuillez les ajouter dans votre fichier .env.`,missingVariables:e});return}let o=(0,r.createClient)(n,s);if(e.query.start&&e.query.end)a=new Date(e.query.start),i=new Date(e.query.end);else{let e=new Date,t=e.getDay();(a=new Date(e)).setDate(e.getDate()+(0===t?-6:1-t)),a.setHours(0,0,0,0),(i=new Date(a)).setDate(a.getDate()+6),i.setHours(23,59,59,999)}let{data:l,error:d}=await o.from("meetings").select(`
        id,
        internal_id,
        participant_email,
        status,
        meeting_start_at,
        meeting_title,
        meeting_url,
        comment,
        created_at,
        identity_id
      `).gte("meeting_start_at",a.toISOString()).lte("meeting_start_at",i.toISOString()).order("meeting_start_at",{ascending:!0});if(d)throw d;let u=[...new Set(l.filter(e=>e.identity_id).map(e=>e.identity_id))],p=new Map;if(u.length>0){let{data:e,error:t}=await o.from("identities").select("id, fullname, company, email").in("id",u);t?console.error("Erreur lors de la récupération des identités:",t):e&&e.length>0&&e.forEach(e=>{e.id&&p.set(e.id,e)})}let c=l.map(e=>({...e,identities:e.identity_id&&p.get(e.identity_id)||null}));t.setHeader("Access-Control-Allow-Origin","*"),t.setHeader("Content-Type","application/json"),t.status(200).json({meetings:c||[],weekStart:a.toISOString(),weekEnd:i.toISOString()})}catch(e){console.error("Erreur dans /api/meetings:",e),t.setHeader("Access-Control-Allow-Origin","*"),t.status(500).json({error:"Erreur lors de la récupération des meetings",message:e.message})}}[r]=i.then?(await i)():i,e.s(["default",()=>n]),a()}catch(e){a(e)}},!1),7072,e=>e.a(async(t,a)=>{try{var r=e.i(6747),i=e.i(9245),n=e.i(4898),s=e.i(2950),o=e.i(4592),l=e.i(7031),d=e.i(1927),u=e.i(6432),p=t([o]);[o]=p.then?(await p)():p;let g=(0,s.hoist)(o,"default"),m=(0,s.hoist)(o,"config"),h=new n.PagesAPIRouteModule({definition:{kind:i.RouteKind.PAGES_API,page:"/api/meetings",pathname:"/api/meetings",bundlePath:"",filename:""},userland:o,distDir:".next",relativeProjectDir:""});async function c(e,t,a){h.isDev&&(0,u.addRequestMeta)(e,"devRequestTimingInternalsEnd",process.hrtime.bigint());let i="/api/meetings";i=i.replace(/\/index$/,"")||"/";let n=await h.prepare(e,t,{srcPage:i});if(!n){t.statusCode=400,t.end("Bad Request"),null==a.waitUntil||a.waitUntil.call(a,Promise.resolve());return}let{query:s,params:o,prerenderManifest:p,routerServerContext:c}=n;try{let a=e.method||"GET",r=(0,l.getTracer)(),n=r.getActiveScopeSpan(),u=h.instrumentationOnRequestError.bind(h),g=async n=>h.render(e,t,{query:{...s,...o},params:o,allowedRevalidateHeaderKeys:[],multiZoneDraftMode:!1,trustHostHeader:!1,previewProps:p.preview,propagateError:!1,dev:h.isDev,page:"/api/meetings",internalRevalidate:null==c?void 0:c.revalidate,onError:(...t)=>u(e,...t)}).finally(()=>{if(!n)return;n.setAttributes({"http.status_code":t.statusCode,"next.rsc":!1});let e=r.getRootSpanAttributes();if(!e)return;if(e.get("next.span_type")!==d.BaseServerSpan.handleRequest)return void console.warn(`Unexpected root span type '${e.get("next.span_type")}'. Please report this Next.js issue https://github.com/vercel/next.js`);let s=e.get("next.route");if(s){let e=`${a} ${s}`;n.setAttributes({"next.route":s,"http.route":s,"next.span_name":e}),n.updateName(e)}else n.updateName(`${a} ${i}`)});n?await g(n):await r.withPropagatedContext(e.headers,()=>r.trace(d.BaseServerSpan.handleRequest,{spanName:`${a} ${i}`,kind:l.SpanKind.SERVER,attributes:{"http.method":a,"http.target":e.url}},g))}catch(e){if(h.isDev)throw e;(0,r.sendError)(t,500,"Internal Server Error")}finally{null==a.waitUntil||a.waitUntil.call(a,Promise.resolve())}}e.s(["config",0,m,"default",0,g,"handler",()=>c]),a()}catch(e){a(e)}},!1)];

//# sourceMappingURL=%5Broot-of-the-server%5D__8b615365._.js.map