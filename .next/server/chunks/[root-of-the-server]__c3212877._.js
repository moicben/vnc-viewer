module.exports=[406,(e,t,r)=>{t.exports=e.x("next/dist/compiled/@opentelemetry/api",()=>require("next/dist/compiled/@opentelemetry/api"))},9470,e=>{"use strict";var t=e.i(6747),r=e.i(9245),n=e.i(4898),i=e.i(2950);async function a(e,t){try{let e=process.env.INCUS_SERVER,r=process.env.IP_PREFIX;if(!e||!r){let n=[];e||n.push("INCUS_SERVER"),r||n.push("IP_PREFIX"),console.error("Variables d'environnement manquantes:",n.join(", ")),t.setHeader("Access-Control-Allow-Origin","*"),t.setHeader("Content-Type","application/json"),t.status(500).json({error:"Configuration incomplète",message:`Variables d'environnement manquantes: ${n.join(", ")}. Veuillez cr\xe9er un fichier .env avec les variables requises.`,missingVariables:n});return}t.setHeader("Access-Control-Allow-Origin","*"),t.setHeader("Content-Type","application/json"),t.status(200).json({incusServer:e,ipPrefix:r})}catch(e){console.error("Erreur dans /api/config:",e),t.setHeader("Access-Control-Allow-Origin","*"),t.status(500).json({error:"Erreur lors de la récupération de la configuration",message:e.message})}}e.s(["default",()=>a],8500);var s=e.i(8500),o=e.i(7031),l=e.i(1927),p=e.i(6432);let u=(0,i.hoist)(s,"default"),d=(0,i.hoist)(s,"config"),c=new n.PagesAPIRouteModule({definition:{kind:r.RouteKind.PAGES_API,page:"/api/config",pathname:"/api/config",bundlePath:"",filename:""},userland:s,distDir:".next",relativeProjectDir:""});async function g(e,r,n){c.isDev&&(0,p.addRequestMeta)(e,"devRequestTimingInternalsEnd",process.hrtime.bigint());let i="/api/config";i=i.replace(/\/index$/,"")||"/";let a=await c.prepare(e,r,{srcPage:i});if(!a){r.statusCode=400,r.end("Bad Request"),null==n.waitUntil||n.waitUntil.call(n,Promise.resolve());return}let{query:s,params:u,prerenderManifest:d,routerServerContext:g}=a;try{let t=e.method||"GET",n=(0,o.getTracer)(),a=n.getActiveScopeSpan(),p=c.instrumentationOnRequestError.bind(c),v=async a=>c.render(e,r,{query:{...s,...u},params:u,allowedRevalidateHeaderKeys:[],multiZoneDraftMode:!1,trustHostHeader:!1,previewProps:d.preview,propagateError:!1,dev:c.isDev,page:"/api/config",internalRevalidate:null==g?void 0:g.revalidate,onError:(...t)=>p(e,...t)}).finally(()=>{if(!a)return;a.setAttributes({"http.status_code":r.statusCode,"next.rsc":!1});let e=n.getRootSpanAttributes();if(!e)return;if(e.get("next.span_type")!==l.BaseServerSpan.handleRequest)return void console.warn(`Unexpected root span type '${e.get("next.span_type")}'. Please report this Next.js issue https://github.com/vercel/next.js`);let s=e.get("next.route");if(s){let e=`${t} ${s}`;a.setAttributes({"next.route":s,"http.route":s,"next.span_name":e}),a.updateName(e)}else a.updateName(`${t} ${i}`)});a?await v(a):await n.withPropagatedContext(e.headers,()=>n.trace(l.BaseServerSpan.handleRequest,{spanName:`${t} ${i}`,kind:o.SpanKind.SERVER,attributes:{"http.method":t,"http.target":e.url}},v))}catch(e){if(c.isDev)throw e;(0,t.sendError)(r,500,"Internal Server Error")}finally{null==n.waitUntil||n.waitUntil.call(n,Promise.resolve())}}e.s(["config",0,d,"default",0,u,"handler",()=>g],9470)}];

//# sourceMappingURL=%5Broot-of-the-server%5D__c3212877._.js.map